<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>TurnORD • Citas</title>
<link rel="apple-touch-icon" sizes="180x180" href="imegenlogin/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="imegenlogin/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="imegenlogin/favicon-16x16.png">
<link rel="manifest" href="imegenlogin/site.webmanifest">
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = { theme:{ extend:{ colors:{ brand:{600:'#2563eb',700:'#1d4ed8'} } } } };
</script>
</head>
<body class="bg-gray-50">

<!-- Header -->
<header class="bg-brand-600 text-white shadow-md sticky top-0 z-50">
  <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
    <h1 class="text-2xl font-bold">TurnORD • Citas</h1>
    <nav class="flex gap-3">
      <a href="./inicio.html" class="px-3 py-2 rounded-lg hover:bg-white/20 transition">Inicio</a>
      <a href="citas.html" class="px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition">Cita</a>
      <a href="./negocio.html" class="px-3 py-2 rounded-lg hover:bg-white/20 transition">Negocio</a>
    </nav>
  </div>
</header>

<main class="max-w-7xl mx-auto px-4 py-6">
  <!-- Panel de control superior -->
  <div class="bg-white rounded-2xl shadow p-4 mb-6">
    <div class="flex flex-wrap items-center justify-between gap-4">
      <!-- Vistas y controles de navegación -->
      <div class="flex flex-wrap gap-2">
        <div class="flex gap-1 bg-gray-100 rounded-lg p-1">
          <button id="vistaDia" class="px-4 py-2 rounded-md transition-all duration-200 text-sm font-medium">Día</button>
          <button id="vistaSemana" class="px-4 py-2 rounded-md transition-all duration-200 text-sm font-medium">Semana</button>
          <button id="vistaMes" class="px-4 py-2 rounded-md transition-all duration-200 text-sm font-medium">Mes</button>
        </div>
        
        <div class="flex gap-2">
          <button id="btnPrev" class="px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors">←</button>
          <button id="btnHoy" class="px-4 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors text-sm font-medium">Hoy</button>
          <button id="btnNext" class="px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors">→</button>
          <input type="date" id="fechaSelector" class="border border-gray-300 rounded-lg px-3 py-2 text-sm" />
        </div>
      </div>
      
      <!-- Filtros y acciones -->
      <div class="flex flex-wrap gap-2">
        <select id="filtroBarbero" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
          <option value="todos">Todos los barberos</option>
        </select>
        
        <select id="filtroEstado" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
          <option value="todos">Todos los estados</option>
          <option value="pendiente">Pendientes</option>
          <option value="confirmada">Confirmadas</option>
          <option value="completada">Completadas</option>
          <option value="cancelada">Canceladas</option>
        </select>
        
        <button id="btnNuevaCita" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium">
          + Nueva Cita
        </button>
        
        <button id="btnExportar" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium">
          Exportar
        </button>
      </div>
    </div>
    
    <!-- Estadísticas rápidas -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 pt-4 border-t">
      <div class="text-center">
        <p class="text-2xl font-bold text-blue-600" id="totalCitas">0</p>
        <p class="text-sm text-gray-600">Total Citas</p>
      </div>
      <div class="text-center">
        <p class="text-2xl font-bold text-green-600" id="citasConfirmadas">0</p>
        <p class="text-sm text-gray-600">Confirmadas</p>
      </div>
      <div class="text-center">
        <p class="text-2xl font-bold text-orange-600" id="citasPendientes">0</p>
        <p class="text-sm text-gray-600">Pendientes</p>
      </div>
      <div class="text-center">
        <p class="text-2xl font-bold text-purple-600" id="ingresosDia">$0</p>
        <p class="text-sm text-gray-600">Ingresos del Día</p>
      </div>
    </div>
  </div>
  
  <!-- Vista de agenda mejorada -->
  <div class="bg-white rounded-2xl shadow overflow-hidden">
    <div id="agenda" class="min-h-96">
      <!-- El contenido se cargará dinámicamente -->
    </div>
  </div>
  
  <!-- Modal para nueva cita -->
  <div id="modalNuevaCita" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
    <div class="bg-white rounded-2xl p-6 w-full max-w-md mx-4">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold">Nueva Cita</h3>
        <button id="cerrarModalCita" class="text-gray-500 hover:text-gray-700">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      
      <form id="formNuevaCita" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Cliente</label>
          <input type="text" id="clienteNombre" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="Nombre del cliente" required>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Teléfono</label>
          <input type="tel" id="clienteTelefono" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="Teléfono del cliente">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Barbero</label>
          <select id="citaBarbero" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
            <option value="">Seleccionar barbero</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Servicio</label>
          <select id="citaServicio" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
            <option value="">Seleccionar servicio</option>
          </select>
        </div>
        
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Fecha</label>
            <input type="date" id="citaFecha" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Hora</label>
            <input type="time" id="citaHora" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
          </div>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Notas (opcional)</label>
          <textarea id="citaNotas" class="w-full border border-gray-300 rounded-lg px-3 py-2" rows="3" placeholder="Notas adicionales"></textarea>
        </div>
        
        <div class="flex gap-3 pt-4">
          <button type="button" id="cancelarCita" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
            Cancelar
          </button>
          <button type="submit" class="flex-1 px-4 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors">
            Crear Cita
          </button>
        </div>
      </form>
    </div>
  </div>
</main>

<script src="./config.js"></script>
<script src="./js/utils.js"></script>
<script src="./js/notifications.js"></script>
<script src="./js/citas.js"></script>
</body>
</html>